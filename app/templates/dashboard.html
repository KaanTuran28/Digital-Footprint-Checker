{% extends "_layout.html" %}
{% block content %}
    <hgroup><h1>Kontrol Paneli</h1><h2>Merhaba, {{ current_user.username }}! Bir platform seÃ§erek analize baÅŸlayÄ±n.</h2></hgroup>
    <article id="loader" style="display: none;"><progress></progress><small>Analiz ediliyor, lÃ¼tfen bekleyin...</small></article>
    <div id="new-results-container"></div>
    <div class="grid">
        <article>
            <hgroup><h4>ğŸ“· Instagram</h4><h6>Herkese aÃ§Ä±k profilleri tarayÄ±n.</h6></hgroup>
            <input type="text" id="instagram-username" name="instagram_username" placeholder="Sadece kullanÄ±cÄ± adÄ± (Ã¶r: nasa)">
            <label for="instagram-deep-scan"><input type="checkbox" id="instagram-deep-scan"> Derin Tarama</label>
            <button class="scan-button" data-platform="instagram">Instagram'Ä± Tara</button>
        </article>
        <article>
            <hgroup><h4>ğŸ¦ X (Twitter)</h4><h6>Herkese aÃ§Ä±k profilleri tarayÄ±n.</h6></hgroup>
            <input type="text" id="x-username" name="x_username" placeholder="Sadece kullanÄ±cÄ± adÄ± (Ã¶r: Google)">
            <label for="x-deep-scan"><input type="checkbox" id="x-deep-scan"> Derin Tarama</label>
            <button class="scan-button" data-platform="x">X'i Tara</button>
        </article>
        <article>
            <hgroup><h4>ğŸ‘” LinkedIn</h4><h6>Herkese aÃ§Ä±k profilleri tarayÄ±n.</h6></hgroup>
            <input type="text" id="linkedin-username" name="linkedin_username" placeholder="Profil adÄ± (Ã¶r: billgates)">
            <label for="linkedin-deep-scan"><input type="checkbox" id="linkedin-deep-scan"> Derin Tarama</label>
            <button class="scan-button" data-platform="linkedin">LinkedIn'i Tara</button>
        </article>
    </div>
    <article>
        <h3>GeÃ§miÅŸ Analizler</h3>
        <div id="past-analyses-list">
            {% if past_analyses %}
                {% for analysis in past_analyses %}
                <article class="past-analysis-card" style="margin-bottom: 1rem; position: relative;">
                    <button class="delete-analysis-btn secondary outline" data-analysis-id="{{ analysis.id }}" style="position: absolute; top: 1rem; right: 1rem; padding: 0.2rem 0.5rem; border-radius: 50%;" aria-label="Sil">ğŸ—‘ï¸</button>
                    <h5 style="margin-bottom: 0.5rem;">{{ analysis.created_at.strftime('%d-%m-%Y %H:%M') }} Tarihli Analiz</h5>
                    <p style="margin-bottom: 0;"><strong>Taranan Profiller:</strong></p>
                    <ul>
                        {% for item in analysis.items %}
                            <li>{{ item.platform.capitalize() }}: <a href="{{ url_for('main.view_analysis', analysis_id=analysis.id) }}">{{ item.profile_username }}</a> ({{ item.risk_level }} Risk)</li>
                        {% else %}
                            <li>Bu analizde taranan profil bulunamadÄ±.</li>
                        {% endfor %}
                    </ul>
                    <a href="{{ url_for('main.view_analysis', analysis_id=analysis.id) }}" role="button" class="contrast outline">DetaylarÄ± GÃ¶rÃ¼ntÃ¼le</a>
                </article>
                {% endfor %}
            {% else %}
                <div style="text-align: center; padding: 2rem; border: 1px dashed var(--muted-border-color); border-radius: var(--border-radius);">
                    <p><strong>HenÃ¼z bir analiz yapmadÄ±nÄ±z.</strong></p>
                </div>
            {% endif %}
        </div>
    </article>
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
{% endblock %}
